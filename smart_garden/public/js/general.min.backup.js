import{initializeApp as a}from"https://www.gstatic.com/firebasejs/9.9.0/firebase-app.js";import{getAnalytics as b}from"https://www.gstatic.com/firebasejs/9.9.0/firebase-analytics.js";import{getDatabase as c,ref as d,onValue as f,onChildAdded as e}from"https://www.gstatic.com/firebasejs/9.9.0/firebase-database.js";let config={apiKey:"AIzaSyCnqizfZOBY3_s-JcZnSZ9Q0Xn5GdBEB8Q",authDomain:"jerukagung-meteorologi.firebaseapp.com",databaseURL:"https://jerukagung-meteorologi-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"jerukagung-meteorologi",storageBucket:"jerukagung-meteorologi.appspot.com",messagingSenderId:"359840979335",appId:"1:359840979335:web:a22c7f30ac241443899b22",measurementId:"G-H7Y4VKQQQ5"},app=a(config),db=c(app),datas=d(db,"data/meteorologi");b(app);var temperature=23.4;let availableUnit=[{type:"C",value:"\xbaC",calculate:a=>a},{type:"I",value:"\xbaF",calculate:a=>1.8*a+32},{type:"SI",value:"\xbaK",calculate:a=>a+273.15},{type:"R",value:"\xbaR",calculate:a=>.8*a}],defaultUnit=0,unitTypes=availableUnit.map(a=>a.type);e(datas,b=>{let a=b.val();$("#pressure").html(a.press??"N/A"),$("#humid").html(a.hum??"N/A"),temperature=parseFloat(a.temp),fillDataValue(),clock(a.timestamp)},console.error("Gagal mengambil data")),$("#unit-change").on("click",a=>{a.preventDefault(),fillDataValue(!0)});let getNextUnit=a=>a<unitTypes.length?a:defaultUnit,fillDataValue=(b=!1)=>{let c=localStorage.getItem("uniType")??availableUnit[defaultUnit].type,a=unitTypes.indexOf(c);a=-1===a?defaultUnit:b?a+=1:a,updateUnit(getNextUnit(a))},updateUnit=a=>{localStorage.setItem("uniType",availableUnit[a].type);let b=availableUnit[a].calculate(temperature),d=availableUnit[a].value,e=availableUnit[a=getNextUnit(a+=1)].value;$("#temp-unit").html(d),$("#unit-change").html(`Change to ${e}`);let c=Math.floor(b),f=addZeroPoint(Math.floor((b-c)*100));$("#temp").html(c??"N/A"),$("#point").html(("."+f)??"00")},addZeroPoint=a=>a<10?"0"+a:a,generateCSV=a=>{let b=["Time,Temperature"];return a.forEach(c=>{let a=c.val();b.push(`${changeClockFormat(a.timestamp)},${a.temp}`)}),b.join(`
`)},newDate=a=>new Date(1e3*parseInt(a)),changeClockFormat=b=>{let a=newDate(b),c=a.getFullYear(),d=addZeroPoint(a.getMonth()),e=addZeroPoint(a.getDate()),f=addZeroPoint(a.getHours()),g=addZeroPoint(a.getMinutes()),h=addZeroPoint(a.getSeconds());return`${c}-${d}-${e} ${f}:${g}:${h}`},clock=e=>{let a=newDate(e),b=parseInt(a.toLocaleString("id-ID",{hour:"numeric",timeZone:"Asia/Jakarta"})),c=["day","night"],d=b>=18||b<6?1:0;$("#type").removeClass(c[0===d?1:0]).addClass(c[d]),$("#time").html(a.toLocaleString("en-GB",{timeZone:"UTC",timeStyle:"long",dateStyle:"long"})),$("#local-time").html(a.toLocaleString("id-ID",{timeZone:"Asia/Jakarta",timeStyle:"long",dateStyle:"long"}))}